<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    {{>css}}

    <style>

        body{
            overflow-x: hidden;
        }
    
        .vertical {
            height: 40px;
            padding-right: 20px;
        }
        .custom-img{
            width: 40px;
            height: 40px;
        }
        .card
        {
            border-radius: 5px;
            box-shadow: 1rem;
        }

    </style>
    <title>BookStore IT</title>
</head>

<body>

    <div class="wrapper">
        <!-- Sidebar  -->
        {{>(nav)}}
        <!-- Page Content  -->
        <div id="content">
            <div class="row pe-5 bg-white" style="border-radius: 5px;">
                <div class="d-flex flex-row justify-content-end align-items-center">
                    <div class="vertical"></div>
                    <div class="me-2"><strong>{{User}}</strong></div>
                    <img src="/unknow.png" alt="Unknow person" class="custom-img">
                </div>
            </div>
            <div class="container overflow-hidden ">
                <div class="row m-3">
                    <div class="col-md-9">
                        <div class="row m-3" style="background: linear-gradient(87.93deg, #CEE6E9 3.83%, #97ADB1 87.25%);
                                        border-radius: 14.0097px;">
                                <div class="col-md-4"><img class=" mr-3" src="/welcome.png">
                                </div>
                                <div class="col-md-8 mt-5">
                                    <h5 class="mt-0">Hi, {{User}}</h5>
                                    <h2><strong>Welcome to Management System</strong></h2>
                                    <h6>Project activity will be updated here. Click on the name section to set your configuration.</h6>
                                </div>
                        </div>
                        <div class="row text-center">
                            {{#if isEmpty}}
                                <div class="alert alert-danger h4" role="alert">
                                Không có dữ liệu
                                </div>
                                <canvas id="myChart"></canvas>
                            {{else}}
                                <canvas id="myChart" data-label="{{label}}" data-data="{{data}}" ></canvas>
                            {{/if}}
                        </div>
                    </div>
                    <div class="col-md-3 text-center">
                                <div class="card active m-3">
                                    <img src="/money.png" class="card-img-top" alt="..." style="width: 75px; position:relative; left: 35%; margin-top: 20px">
                                    <div class="card-body" style="padding: 5px;">
                                        <p class="card-text">
                                        <h3><strong>{{format_number revenue}}đ</strong></h3>
                                        </p>
                                    </div>
                                    <h5 class="card-header" style="background-color: rgba(3, 169, 245,0.3)"><strong>Tổng tiền hóa đơn đã lập</strong></h5>
                                </div>
                                <div class="card active m-3">
                                    <img src="/coin.png" class="card-img-bottom position-relative" alt="..." style="width: 75px; position:relative;  left: 35%; margin-top: 20px">
                                    <div class="card-body">
                                        <p class="card-text">
                                        <h3><strong>{{format_number realRevenue}}đ</strong></h3>
                                        </p>
                                    </div>
                                    <h5 class="card-header" style="background-color: rgba(230, 163, 78);"><strong>Tổng tiền thu được thực tế</strong></h5>
                                </div>
                                <div class="card active m-3">
                                    <img src="/customer.png" class="card-img-bottom" alt="..." style="padding-bottom: 5px; width: 75px;  position:relative; left: 35%; margin-top: 20px">
                                    <div class="card-body">
                                        <p class="card-text "> 
                                        <h3><strong>{{format_number customer}}</strong></h3>
                                        </p>
                                    </div>
                                    <h5 class="card-header" style="background-color: rgba(220,184,187) ;"><strong>Số lượng khách</strong></h5>
                                </div>
                    </div>
                </div>
            </div>
           

        </div>
    </div>
    
</body>
<!-- Jquery -->
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>

<!-- Chart-->
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
    type="text/javascript"></script>

<!-- Popper.JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    var ctx = $("#myChart")[0].getContext('2d');
    var bg_color = [
                'rgba(255, 99, 132, 0.5)',
                'rgba(54, 162, 235, 0.5)',
                'rgba(255, 206, 86, 0.5)',
                'rgba(75, 192, 192, 0.5)',
                'rgba(153, 102, 255, 0.5)',
                'rgba(255, 159, 64, 0.5)'
                ];
    var border_color = [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
                ];

    //console.log()
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: $("#myChart").data("label"),
            datasets: [{
                label: 'Biểu đồ thống kê về số sách và số khách hàng đang nợ',
                data: $("#myChart").data("data"),
                fill: false,
                backgroundColor: bg_color,
                borderColor: border_color,
            }]
        },   
        options: {
            indexAxis: 'y',
        }          
    });
</script>
</html>